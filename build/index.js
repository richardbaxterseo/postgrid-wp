(()=>{"use strict";var e,t={938:(e,t,r)=>{const o=window.wp.blocks,l=JSON.parse('{"UU":"postgrid/postgrid"}'),a=window.React,n=window.wp.i18n,s=window.wp.blockEditor,i=window.wp.components,c=window.wp.data,d=window.wp.element,p=window.wp.apiFetch;var g=r.n(p);(0,o.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:t}){const{postsPerPage:r,orderBy:o,order:l,selectedCategory:p,columns:u,showDate:m,showExcerpt:_}=e,[h,w]=(0,d.useState)([]),[b,v]=(0,d.useState)(!1),E=(0,c.useSelect)(e=>{const{getEntityRecords:t}=e("core");return t("taxonomy","category",{per_page:-1})||[]},[]);(0,d.useEffect)(()=>{v(!0);const e=new URLSearchParams({per_page:r,orderby:o,order:l,category:p});g()({path:`/postgrid/v1/posts?${e}`}).then(e=>{w(e),v(!1)}).catch(()=>{w([]),v(!1)})},[r,o,l,p]);const f=(0,s.useBlockProps)({className:`columns-${u}`}),y=[{label:(0,n.__)("All Categories","postgrid"),value:0}];return E.length>0&&E.forEach(e=>{y.push({label:e.name,value:e.id})}),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(s.InspectorControls,null,(0,a.createElement)(i.PanelBody,{title:(0,n.__)("Posts Settings","postgrid")},(0,a.createElement)(i.RangeControl,{label:(0,n.__)("Number of posts","postgrid"),value:r,onChange:e=>t({postsPerPage:e}),min:1,max:20}),(0,a.createElement)(i.SelectControl,{label:(0,n.__)("Order by","postgrid"),value:o,options:[{label:(0,n.__)("Date","postgrid"),value:"date"},{label:(0,n.__)("Title","postgrid"),value:"title"},{label:(0,n.__)("Menu order","postgrid"),value:"menu_order"}],onChange:e=>t({orderBy:e})}),(0,a.createElement)(i.SelectControl,{label:(0,n.__)("Order","postgrid"),value:l,options:[{label:(0,n.__)("Descending","postgrid"),value:"desc"},{label:(0,n.__)("Ascending","postgrid"),value:"asc"}],onChange:e=>t({order:e})}),(0,a.createElement)(i.SelectControl,{label:(0,n.__)("Category","postgrid"),value:p,options:y,onChange:e=>t({selectedCategory:parseInt(e)})})),(0,a.createElement)(i.PanelBody,{title:(0,n.__)("Layout Settings","postgrid")},(0,a.createElement)(i.RangeControl,{label:(0,n.__)("Columns","postgrid"),value:u,onChange:e=>t({columns:e}),min:1,max:4}),(0,a.createElement)(i.ToggleControl,{label:(0,n.__)("Show date","postgrid"),checked:m,onChange:e=>t({showDate:e})}),(0,a.createElement)(i.ToggleControl,{label:(0,n.__)("Show excerpt","postgrid"),checked:_,onChange:e=>t({showExcerpt:e})}))),(0,a.createElement)("div",{...f},b&&(0,a.createElement)(i.Placeholder,{icon:"grid-view",label:(0,n.__)("PostGrid","postgrid")},(0,a.createElement)(i.Spinner,null)),!b&&0===h.length&&(0,a.createElement)(i.Placeholder,{icon:"grid-view",label:(0,n.__)("PostGrid","postgrid")},(0,n.__)("No posts found.","postgrid")),!b&&h.length>0&&(0,a.createElement)("div",{className:"wp-block-postgrid"},h.map(e=>(0,a.createElement)("article",{key:e.id,className:"wp-block-postgrid__item"},(0,a.createElement)("h3",{className:"wp-block-postgrid__title"},(0,a.createElement)("a",{href:e.link},e.title)),m&&(0,a.createElement)("time",{className:"wp-block-postgrid__date"},e.date),_&&(0,a.createElement)("div",{className:"wp-block-postgrid__excerpt",dangerouslySetInnerHTML:{__html:e.excerpt}}))))))},save:()=>null})}},r={};function o(e){var l=r[e];if(void 0!==l)return l.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,r,l,a)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,l,a]=e[d],s=!0,i=0;i<r.length;i++)(!1&a||n>=a)&&Object.keys(o.O).every(e=>o.O[e](r[i]))?r.splice(i--,1):(s=!1,a<n&&(n=a));if(s){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,l,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var l,a,[n,s,i]=r,c=0;if(n.some(t=>0!==e[t])){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(i)var d=i(o)}for(t&&t(r);c<n.length;c++)a=n[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},r=globalThis.webpackChunkpostgrid=globalThis.webpackChunkpostgrid||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=o.O(void 0,[350],()=>o(938));l=o.O(l)})();